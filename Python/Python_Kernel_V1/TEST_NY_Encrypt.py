import sys
import marshal

import NY_Encrypt_RSA
import NY_Encrypt

# Dynamic
import test

NY_Encrypt_RSA.create_key('key.public', 'key.private')

result = NY_Encrypt.createNY('NYAM.list')
if result :
    public_key = NY_Encrypt_RSA.read_key('key.public')
    file = NY_Encrypt.NY('NYAM.ny', public_key)
    print()
    print("#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#")
    print(file.body)
    print("#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#")
    print()

    """
    module = NY_Encrypt.load('test', file.body)
    if module == None :
        print("%%%%%%%% ERROR %%%%%%%%")
    else :
        print()
        print("#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#")
        print(dir(module))
        print("#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#")
        print()
    
    moduleHandle = test.NYamMain()
    moduleHandle.init('.')
    print(moduleHandle.getMalwareList())
    print(moduleHandle.getModuleInformation())
    moduleHandle.uninit()
    """